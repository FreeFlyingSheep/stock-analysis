# Stock Analysis

Stock Analysis is an A-share fundamental scoring agent that provides comprehensive stock data management and analysis capabilities.

## Disclaimer

**This tool is for reference and educational purposes only. The data and analysis provided are for informational purposes and should not be considered as financial advice.**

I do **NOT** provide any financial, investment, or trading recommendations. Users should conduct their own research and consult with qualified financial advisors before making any investment decisions.

**Investment involves risk, including possible loss of principal.** Past performance is not indicative of future results. Use this tool at your own risk and discretion.

## Features

- **Stock Data Management**: Store and query Chinese A-share stock information
- **RESTful API**: FastAPI-based API with automatic documentation
- **Async Database Operations**: High-performance async SQLAlchemy with PostgreSQL
- **CSV Import**: Bulk import stock data from CSV files
- **Filtering & Pagination**: Advanced filtering by classification and industry
- **Database Migrations**: Alembic integration for schema versioning
- **Type Safety**: Full type hints with mypy validation
- **Code Quality**: Automated formatting and linting with ruff
- **Testing**: Comprehensive test suite with pytest and testcontainers

## TODO List

High priority:

- Implement stock scoring rules engine
- Add LLM integration for advanced stock analysis
- Add a chatbot interface for querying stock information

Medium priority:

- Create scheduled tasks for regular data updates
- Crawl and integrate additional stock data sources

Low priority:

- Develop frontend interface for visualizing stock data and scores
- Add observability and monitoring
- Use k8s to deploy the application
- Add data mapping for cninfo API responses

## Requirements

- Python 3.14+
- PostgreSQL 18+
- [uv](https://docs.astral.sh/uv/) package manager

## Installation

1. Clone the repository:

    ```bash
    git clone https://github.com/FreeFlyingSheep/stock-analysis
    cd stock-analysis
    ```

2. Install dependencies using uv:

    ```bash
    uv sync
    ```

3. Configure environment variables:

    ```bash
    cp .env.example .env
    # Edit .env with your database credentials
    ```

4. Initialize the database:

    ```bash
    ./scripts/init.sh
    ```

This will create the database, run migrations, and import initial stock data from `data/stocks.csv`.

## Usage

### Starting the Application

Run the FastAPI application with hot reload:

```bash
uv run app
```

The API will be available at `http://127.0.0.1:8000`.

API documentation is automatically generated by FastAPI and can be accessed at:

- Swagger UI: `http://127.0.0.1:8000/docs`
- ReDoc: `http://127.0.0.1:8000/redoc`

### Stopping the Application

To stop the application, simply interrupt the process (e.g., `Ctrl+C` in the terminal).

## Development

### Code Quality Checks and Tests

Run all quality checks (formatting, linting, type checking, tests):

```bash
./scripts/check.sh
```

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
